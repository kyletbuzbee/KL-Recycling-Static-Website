"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[872],{3148:(e,t,r)=>{r.d(t,{u:()=>l});var n=r(4501),i=r(4232),o=r(9070),a=r(6691);let l=i.forwardRef(({envMap:e,resolution:t=256,frames:r=1/0,makeDefault:l,children:s,...c},u)=>{let f=(0,o.D)(({set:e})=>e),d=(0,o.D)(({camera:e})=>e),p=(0,o.D)(({size:e})=>e),v=i.useRef(null);i.useImperativeHandle(u,()=>v.current,[]);let h=i.useRef(null),m=function(e,t,r){let n=(0,o.D)(e=>e.size),l=(0,o.D)(e=>e.viewport),s="number"==typeof e?e:n.width*l.dpr,c=n.height*l.dpr,{samples:u=0,depth:f,...d}=("number"==typeof e?void 0:e)||{},p=i.useMemo(()=>{let e=new a.nWS(s,c,{minFilter:a.k6q,magFilter:a.k6q,type:a.ix0,...d});return f&&(e.depthTexture=new a.VCu(s,c,a.RQf)),e.samples=u,e},[]);return i.useLayoutEffect(()=>{p.setSize(s,c),u&&(p.samples=u)},[u,p,s,c]),i.useEffect(()=>()=>p.dispose(),[]),p}(t);i.useLayoutEffect(()=>{c.manual||(v.current.aspect=p.width/p.height)},[p,c]),i.useLayoutEffect(()=>{v.current.updateProjectionMatrix()});let g=0,b=null,y="function"==typeof s;return(0,o.F)(t=>{y&&(r===1/0||g<r)&&(h.current.visible=!1,t.gl.setRenderTarget(m),b=t.scene.background,e&&(t.scene.background=e),t.gl.render(t.scene,v.current),t.scene.background=b,t.gl.setRenderTarget(null),h.current.visible=!0,g++)}),i.useLayoutEffect(()=>{if(l)return f(()=>({camera:v.current})),()=>f(()=>({camera:d}))},[v,l,f]),i.createElement(i.Fragment,null,i.createElement("perspectiveCamera",(0,n.A)({ref:v},c),!y&&s),i.createElement("group",{ref:h},y&&s(m.texture)))})},3191:(e,t,r)=>{r.d(t,{E:()=>s});var n=r(4501),i=r(4232),o=r(1825),a=r(9070),l=r(1401);let s=i.forwardRef(({sdfGlyphSize:e=64,anchorX:t="center",anchorY:r="middle",font:s,fontSize:c=1,children:u,characters:f,onSync:d,...p},v)=>{let h=(0,a.D)(({invalidate:e})=>e),[m]=i.useState(()=>new o.EY),[g,b]=i.useMemo(()=>{let e=[],t="";return i.Children.forEach(u,r=>{"string"==typeof r||"number"==typeof r?t+=r:e.push(r)}),[e,t]},[u]);return(0,l.DY)(()=>new Promise(e=>(0,o.PY)({font:s,characters:f},e)),["troika-text",s,f]),i.useLayoutEffect(()=>void m.sync(()=>{h(),d&&d(m)})),i.useEffect(()=>()=>m.dispose(),[m]),i.createElement("primitive",(0,n.A)({object:m,ref:v,font:s,text:b,anchorX:t,anchorY:r,fontSize:c,sdfGlyphSize:e},p),g)})},6527:(e,t,r)=>{r.d(t,{Hl:()=>u});var n=r(9070),i=r(4232),o=r(4796),a=r(8876),l=r(1831),s=r(7876);r(7302),r(667),r(405);let c=i.forwardRef(function({children:e,fallback:t,resize:r,style:c,gl:u,events:f=n.c,eventSource:d,eventPrefix:p,shadows:v,linear:h,flat:m,legacy:g,orthographic:b,frameloop:y,dpr:w,performance:_,raycaster:E,camera:C,scene:P,onPointerMissed:j,onCreated:S,...M},x){i.useMemo(()=>(0,n.e)(o),[]);let O=(0,l.y3)(),[D,k]=(0,a.A)({scroll:!0,debounce:{scroll:50,resize:0},...r}),A=i.useRef(null),R=i.useRef(null);i.useImperativeHandle(x,()=>A.current);let T=(0,n.u)(j),[L,z]=i.useState(!1),[I,F]=i.useState(!1);if(L)throw L;if(I)throw I;let H=i.useRef(null);(0,n.a)(()=>{let t=A.current;k.width>0&&k.height>0&&t&&(H.current||(H.current=(0,n.b)(t)),H.current.configure({gl:u,events:f,shadows:v,linear:h,flat:m,legacy:g,orthographic:b,frameloop:y,dpr:w,performance:_,raycaster:E,camera:C,scene:P,size:k,onPointerMissed:(...e)=>null==T.current?void 0:T.current(...e),onCreated:e=>{null==e.events.connect||e.events.connect(d?(0,n.i)(d)?d.current:d:R.current),p&&e.setEvents({compute:(e,t)=>{let r=e[p+"X"],n=e[p+"Y"];t.pointer.set(r/t.size.width*2-1,-(2*(n/t.size.height))+1),t.raycaster.setFromCamera(t.pointer,t.camera)}}),null==S||S(e)}}),H.current.render((0,s.jsx)(O,{children:(0,s.jsx)(n.E,{set:F,children:(0,s.jsx)(i.Suspense,{fallback:(0,s.jsx)(n.B,{set:z}),children:null!=e?e:null})})})))}),i.useEffect(()=>{let e=A.current;if(e)return()=>(0,n.d)(e)},[]);let q=d?"none":"auto";return(0,s.jsx)("div",{ref:R,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:q,...c},...M,children:(0,s.jsx)("div",{ref:D,style:{width:"100%",height:"100%"},children:(0,s.jsx)("canvas",{ref:A,style:{display:"block"},children:t})})})}),u=i.forwardRef(function(e,t){return(0,s.jsx)(l.Af,{children:(0,s.jsx)(c,{...e,ref:t})})})},9070:(e,t,r)=>{let n,i,o;r.d(t,{B:()=>S,D:()=>et,E:()=>M,F:()=>er,a:()=>P,b:()=>ed,c:()=>em,d:()=>ev,e:()=>w,i:()=>C,u:()=>j});var a,l,s=r(6691),c=r(4796),u=r(4232),f=r(7302);let d="undefined"==typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?u.useEffect:u.useLayoutEffect;var p=r(1401),v=r(7876),h=r(667),m=r.n(h),g=r(405),b=r(5364);let y={},w=e=>void Object.assign(y,e),_=e=>"colorSpace"in e||"outputColorSpace"in e,E=()=>{var e;return null!=(e=y.ColorManagement)?e:null},C=e=>e&&e.hasOwnProperty("current"),P="undefined"!=typeof window&&(null!=(a=window.document)&&a.createElement||(null==(l=window.navigator)?void 0:l.product)==="ReactNative")?u.useLayoutEffect:u.useEffect;function j(e){let t=u.useRef(e);return P(()=>void(t.current=e),[e]),t}function S({set:e}){return P(()=>(e(new Promise(()=>null)),()=>e(!1)),[e]),null}class M extends u.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}M.getDerivedStateFromError=()=>({error:!0});let x="__default",O=new Map;function D(e){var t;let r="undefined"!=typeof window?null!=(t=window.devicePixelRatio)?t:2:1;return Array.isArray(e)?Math.min(Math.max(e[0],r),e[1]):e}let k=e=>{var t;return null==(t=e.__r3f)?void 0:t.root.getState()};function A(e){let t=e.__r3f.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}let R={obj:e=>e===Object(e)&&!R.arr(e)&&"function"!=typeof e,fun:e=>"function"==typeof e,str:e=>"string"==typeof e,num:e=>"number"==typeof e,boo:e=>"boolean"==typeof e,und:e=>void 0===e,arr:e=>Array.isArray(e),equ(e,t,{arrays:r="shallow",objects:n="reference",strict:i=!0}={}){let o;if(typeof e!=typeof t||!!e!=!!t)return!1;if(R.str(e)||R.num(e)||R.boo(e))return e===t;let a=R.obj(e);if(a&&"reference"===n)return e===t;let l=R.arr(e);if(l&&"reference"===r)return e===t;if((l||a)&&e===t)return!0;for(o in e)if(!(o in t))return!1;if(a&&"shallow"===r&&"shallow"===n){for(o in i?t:e)if(!R.equ(e[o],t[o],{strict:i,objects:"reference"}))return!1}else for(o in i?t:e)if(e[o]!==t[o])return!1;if(R.und(o)){if(l&&0===e.length&&0===t.length||a&&0===Object.keys(e).length&&0===Object.keys(t).length)return!0;if(e!==t)return!1}return!0}};function T(e,t){return e.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...t},e}function L(e,t){let r=e;if(!t.includes("-"))return{target:r,key:t};{let n=t.split("-"),i=n.pop();return{target:r=n.reduce((e,t)=>e[t],e),key:i}}}let z=/-\d+$/;function I(e,t,r){if(R.str(r)){if(z.test(r)){let{target:t,key:n}=L(e,r.replace(z,""));Array.isArray(t[n])||(t[n]=[])}let{target:n,key:i}=L(e,r);t.__r3f.previousAttach=n[i],n[i]=t}else t.__r3f.previousAttach=r(e,t)}function F(e,t,r){var n,i;if(R.str(r)){let{target:n,key:i}=L(e,r),o=t.__r3f.previousAttach;void 0===o?delete n[i]:n[i]=o}else null==(n=t.__r3f)||null==n.previousAttach||n.previousAttach(e,t);null==(i=t.__r3f)||delete i.previousAttach}function H(e,{children:t,key:r,ref:n,...i},{children:o,key:a,ref:l,...s}={},c=!1){let u=e.__r3f,f=Object.entries(i),d=[];if(c){let e=Object.keys(s);for(let t=0;t<e.length;t++)i.hasOwnProperty(e[t])||f.unshift([e[t],x+"remove"])}f.forEach(([t,r])=>{var n;if(null!=(n=e.__r3f)&&n.primitive&&"object"===t||R.equ(r,s[t]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(t))return d.push([t,r,!0,[]]);let o=[];for(let e in t.includes("-")&&(o=t.split("-")),d.push([t,r,!1,o]),i){let r=i[e];e.startsWith(`${t}-`)&&d.push([e,r,!1,e.split("-")])}});let p={...i};return null!=u&&u.memoizedProps&&null!=u&&u.memoizedProps.args&&(p.args=u.memoizedProps.args),null!=u&&u.memoizedProps&&null!=u&&u.memoizedProps.attach&&(p.attach=u.memoizedProps.attach),{memoized:p,changes:d}}let q=void 0!==b&&!1;function W(e,t){var r,n,i;let o=e.__r3f,a=null==o?void 0:o.root,l=null==a||null==a.getState?void 0:a.getState(),{memoized:c,changes:u}=t&&t.memoized&&t.changes?t:H(e,t),f=null==o?void 0:o.eventCount;e.__r3f&&(e.__r3f.memoizedProps=c);for(let t=0;t<u.length;t++){let[r,a,c,f]=u[t];if(_(e)){let e="srgb",t="srgb-linear";"encoding"===r?(r="colorSpace",a=3001===a?e:t):"outputEncoding"===r&&(r="outputColorSpace",a=3001===a?e:t)}let d=e,p=d[r];if(f.length&&!((p=f.reduce((e,t)=>e[t],e))&&p.set)){let[t,...n]=f.reverse();d=n.reverse().reduce((e,t)=>e[t],e),r=t}if(a===x+"remove")if(d.constructor){let e=O.get(d.constructor);e||(e=new d.constructor,O.set(d.constructor,e)),a=e[r]}else a=0;if(c&&o)a?o.handlers[r]=a:delete o.handlers[r],o.eventCount=Object.keys(o.handlers).length;else if(p&&p.set&&(p.copy||p instanceof s.zgK)){if(Array.isArray(a))p.fromArray?p.fromArray(a):p.set(...a);else if(p.copy&&a&&a.constructor&&(q?p.constructor.name===a.constructor.name:p.constructor===a.constructor))p.copy(a);else if(void 0!==a){let e=null==(n=p)?void 0:n.isColor;!e&&p.setScalar?p.setScalar(a):p instanceof s.zgK&&a instanceof s.zgK?p.mask=a.mask:p.set(a),!E()&&l&&!l.linear&&e&&p.convertSRGBToLinear()}}else if(d[r]=a,null!=(i=d[r])&&i.isTexture&&d[r].format===s.GWd&&d[r].type===s.OUM&&l){let e=d[r];_(e)&&_(l.gl)?e.colorSpace=l.gl.outputColorSpace:e.encoding=l.gl.outputEncoding}B(e)}if(o&&o.parent&&e.raycast&&f!==o.eventCount){let t=A(e).getState().internal,r=t.interaction.indexOf(e);r>-1&&t.interaction.splice(r,1),o.eventCount&&t.interaction.push(e)}return(1!==u.length||"onUpdate"!==u[0][0])&&u.length&&null!=(r=e.__r3f)&&r.parent&&U(e),e}function B(e){var t,r;let n=null==(t=e.__r3f)||null==(r=t.root)||null==r.getState?void 0:r.getState();n&&0===n.internal.frames&&n.invalidate()}function U(e){null==e.onUpdate||e.onUpdate(e)}function N(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function Y(e,t,r,n){let i=r.get(t);i&&(r.delete(t),0===r.size&&(e.delete(n),i.target.releasePointerCapture(n)))}let $=e=>!!(null!=e&&e.render),V=u.createContext(null),G=new Set,X=new Set,K=new Set;function Q(e,t){if(e.size)for(let{callback:r}of e.values())r(t)}function Z(e,t){switch(e){case"before":return Q(G,t);case"after":return Q(X,t);case"tail":return Q(K,t)}}function J(e,t,r){let a=t.clock.getDelta();for("never"===t.frameloop&&"number"==typeof e&&(a=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),i=t.internal.subscribers,n=0;n<i.length;n++)(o=i[n]).ref.current(o.store.getState(),a,r);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),"always"===t.frameloop?1:t.internal.frames}function ee(){let e=u.useContext(V);if(!e)throw Error("R3F: Hooks can only be used within the Canvas component!");return e}function et(e=e=>e,t){return ee()(e,t)}function er(e,t=0){let r=ee(),n=r.getState().internal.subscribe,i=j(e);return P(()=>n(i,t,r),[t,n,r]),null}let en=new WeakMap;function ei(e,t){return function(r,...n){let i=en.get(r);return i||(i=new r,en.set(r,i)),e&&e(i),Promise.all(n.map(e=>new Promise((r,n)=>i.load(e,e=>{e.scene&&Object.assign(e,function(e){let t={nodes:{},materials:{}};return e&&e.traverse(e=>{e.name&&(t.nodes[e.name]=e),e.material&&!t.materials[e.material.name]&&(t.materials[e.material.name]=e.material)}),t}(e.scene)),r(e)},t,t=>n(Error(`Could not load ${e}: ${null==t?void 0:t.message}`))))))}}function eo(e,t,r,n){let i=Array.isArray(t)?t:[t],o=(0,p.DY)(ei(r,n),[e,...i],{equal:R.equ});return Array.isArray(t)?o:o[0]}eo.preload=function(e,t,r){let n=Array.isArray(t)?t:[t];return(0,p.uv)(ei(r),[e,...n])},eo.clear=function(e,t){let r=Array.isArray(t)?t:[t];return(0,p.IU)([e,...r])};let ea=new Map,{invalidate:el,advance:es}=function(e){let t,r,n,i=!1,o=!1;function a(l){for(let c of(r=requestAnimationFrame(a),i=!0,t=0,Z("before",l),o=!0,e.values())){var s;(n=c.store.getState()).internal.active&&("always"===n.frameloop||n.internal.frames>0)&&!(null!=(s=n.gl.xr)&&s.isPresenting)&&(t+=J(l,n))}if(o=!1,Z("after",l),0===t)return Z("tail",l),i=!1,cancelAnimationFrame(r)}return{loop:a,invalidate:function t(r,n=1){var l;if(!r)return e.forEach(e=>t(e.store.getState(),n));(null==(l=r.gl.xr)||!l.isPresenting)&&r.internal.active&&"never"!==r.frameloop&&(n>1?r.internal.frames=Math.min(60,r.internal.frames+n):o?r.internal.frames=2:r.internal.frames=1,i||(i=!0,requestAnimationFrame(a)))},advance:function(t,r=!0,n,i){if(r&&Z("before",t),n)J(t,n,i);else for(let r of e.values())J(t,r.store.getState());r&&Z("after",t)}}}(ea),{reconciler:ec,applyProps:eu}=function(e,t){function r(e,{args:t=[],attach:r,...n},i){let o,a=`${e[0].toUpperCase()}${e.slice(1)}`;if("primitive"===e){if(void 0===n.object)throw Error("R3F: Primitives without 'object' are invalid!");o=T(n.object,{type:e,root:i,attach:r,primitive:!0})}else{let n=y[a];if(!n)throw Error(`R3F: ${a} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(t))throw Error("R3F: The args prop must be an array!");o=T(new n(...t),{type:e,root:i,attach:r,memoizedProps:{args:t}})}return void 0===o.__r3f.attach&&(o.isBufferGeometry?o.__r3f.attach="geometry":o.isMaterial&&(o.__r3f.attach="material")),"inject"!==a&&W(o,n),o}function n(e,t){let r=!1;if(t){var n,i;null!=(n=t.__r3f)&&n.attach?I(e,t,t.__r3f.attach):t.isObject3D&&e.isObject3D&&(e.add(t),r=!0),r||null==(i=e.__r3f)||i.objects.push(t),t.__r3f||T(t,{}),t.__r3f.parent=e,U(t),B(t)}}function i(e,t,r){let n=!1;if(t){var i,o;if(null!=(i=t.__r3f)&&i.attach)I(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){t.parent=e,t.dispatchEvent({type:"added"}),e.dispatchEvent({type:"childadded",child:t});let i=e.children.filter(e=>e!==t),o=i.indexOf(r);e.children=[...i.slice(0,o),t,...i.slice(o)],n=!0}n||null==(o=e.__r3f)||o.objects.push(t),t.__r3f||T(t,{}),t.__r3f.parent=e,U(t),B(t)}}function o(e,t,r=!1){e&&[...e].forEach(e=>a(t,e,r))}function a(e,t,r){if(t){var n,i,a,l,s;t.__r3f&&(t.__r3f.parent=null),null!=(n=e.__r3f)&&n.objects&&(e.__r3f.objects=e.__r3f.objects.filter(e=>e!==t)),null!=(i=t.__r3f)&&i.attach?F(e,t,t.__r3f.attach):t.isObject3D&&e.isObject3D&&(e.remove(t),null!=(l=t.__r3f)&&l.root&&function(e,t){let{internal:r}=e.getState();r.interaction=r.interaction.filter(e=>e!==t),r.initialHits=r.initialHits.filter(e=>e!==t),r.hovered.forEach((e,n)=>{(e.eventObject===t||e.object===t)&&r.hovered.delete(n)}),r.capturedMap.forEach((e,n)=>{Y(r.capturedMap,t,e,n)})}(A(t),t));let c=null==(a=t.__r3f)?void 0:a.primitive,u=!c&&(void 0===r?null!==t.dispose:r);if(c||(o(null==(s=t.__r3f)?void 0:s.objects,t,u),o(t.children,t,u)),delete t.__r3f,u&&t.dispose&&"Scene"!==t.type){let e=()=>{try{t.dispose()}catch(e){}};"undefined"==typeof IS_REACT_ACT_ENVIRONMENT?(0,g.unstable_scheduleCallback)(g.unstable_IdlePriority,e):e()}B(e)}}let l=()=>{};return{reconciler:m()({createInstance:r,removeChild:a,appendChild:n,appendInitialChild:n,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(e,t)=>{if(!t)return;let r=e.getState().scene;r.__r3f&&(r.__r3f.root=e,n(r,t))},removeChildFromContainer:(e,t)=>{t&&a(e.getState().scene,t)},insertInContainerBefore:(e,t,r)=>{if(!t||!r)return;let n=e.getState().scene;n.__r3f&&i(n,t,r)},getRootHostContext:()=>null,getChildHostContext:e=>e,finalizeInitialChildren(e){var t;return!!(null!=(t=null==e?void 0:e.__r3f)?t:{}).handlers},prepareUpdate(e,t,r,n){var i;if((null!=(i=null==e?void 0:e.__r3f)?i:{}).primitive&&n.object&&n.object!==e)return[!0];{let{args:t=[],children:i,...o}=n,{args:a=[],children:l,...s}=r;if(!Array.isArray(t))throw Error("R3F: the args prop must be an array!");if(t.some((e,t)=>e!==a[t]))return[!0];let c=H(e,o,s,!0);return c.changes.length?[!1,c]:null}},commitUpdate(e,[t,i],o,l,s,c){t?function(e,t,i,o){var l;let s=null==(l=e.__r3f)?void 0:l.parent;if(!s)return;let c=r(t,i,e.__r3f.root);if(e.children){for(let t of e.children)t.__r3f&&n(c,t);e.children=e.children.filter(e=>!e.__r3f)}e.__r3f.objects.forEach(e=>n(c,e)),e.__r3f.objects=[],e.__r3f.autoRemovedBeforeAppend||a(s,e),c.parent&&(c.__r3f.autoRemovedBeforeAppend=!0),n(s,c),c.raycast&&c.__r3f.eventCount&&A(c).getState().internal.interaction.push(c),[o,o.alternate].forEach(e=>{null!==e&&(e.stateNode=c,e.ref&&("function"==typeof e.ref?e.ref(c):e.ref.current=c))})}(e,o,s,c):W(e,i)},commitMount(e,t,r,n){var i;let o=null!=(i=e.__r3f)?i:{};e.raycast&&o.handlers&&o.eventCount&&A(e).getState().internal.interaction.push(e)},getPublicInstance:e=>e,prepareForCommit:()=>null,preparePortalMount:e=>T(e.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(e){var t;let{attach:r,parent:n}=null!=(t=e.__r3f)?t:{};r&&n&&F(n,e,r),e.isObject3D&&(e.visible=!1),B(e)},unhideInstance(e,t){var r;let{attach:n,parent:i}=null!=(r=e.__r3f)?r:{};n&&i&&I(i,e,n),(e.isObject3D&&null==t.visible||t.visible)&&(e.visible=!0),B(e)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>t?t():f.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:"undefined"!=typeof performance&&R.fun(performance.now)?performance.now:R.fun(Date.now)?Date.now:()=>0,scheduleTimeout:R.fun(setTimeout)?setTimeout:void 0,cancelTimeout:R.fun(clearTimeout)?clearTimeout:void 0}),applyProps:W}}(0,function(){var e;let t="undefined"!=typeof self&&self||"undefined"!=typeof window&&window;if(!t)return f.DefaultEventPriority;switch(null==(e=t.event)?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return f.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return f.ContinuousEventPriority;default:return f.DefaultEventPriority}}),ef={objects:"shallow",strict:!1};function ed(e){let t,r,n=ea.get(e),i=null==n?void 0:n.fiber,o=null==n?void 0:n.store;n&&console.warn("R3F.createRoot should only be called once!");let a="function"==typeof reportError?reportError:console.error,l=o||((e,t)=>{let r=function(e){let t="function"==typeof e?function(e){let t,r=new Set,n=(e,n)=>{let i="function"==typeof e?e(t):e;if(i!==t){let e=t;t=n?i:Object.assign({},t,i),r.forEach(r=>r(t,e))}},i=()=>t,o={setState:n,getState:i,subscribe:(e,n,o)=>n||o?((e,n=i,o=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let a=n(t);function l(){let r=n(t);if(!o(a,r)){let t=a;e(a=r,t)}}return r.add(l),()=>r.delete(l)})(e,n,o):(r.add(e),()=>r.delete(e)),destroy:()=>r.clear()};return t=e(n,i,o),o}(e):e,r=(e=t.getState,r=Object.is)=>{let n,[,i]=(0,u.useReducer)(e=>e+1,0),o=t.getState(),a=(0,u.useRef)(o),l=(0,u.useRef)(e),s=(0,u.useRef)(r),c=(0,u.useRef)(!1),f=(0,u.useRef)();void 0===f.current&&(f.current=e(o));let p=!1;(a.current!==o||l.current!==e||s.current!==r||c.current)&&(n=e(o),p=!r(f.current,n)),d(()=>{p&&(f.current=n),a.current=o,l.current=e,s.current=r,c.current=!1});let v=(0,u.useRef)(o);d(()=>{let e=()=>{try{let e=t.getState(),r=l.current(e);s.current(f.current,r)||(a.current=e,f.current=r,i())}catch(e){c.current=!0,i()}},r=t.subscribe(e);return t.getState()!==v.current&&e(),r},[]);let h=p?n:f.current;return(0,u.useDebugValue)(h),h};return Object.assign(r,t),r[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");let e=[r,t];return{next(){let t=e.length<=0;return{value:e.shift(),done:t}}}},r}((r,n)=>{let i,o=new s.Pq0,a=new s.Pq0,l=new s.Pq0;function c(e=n().camera,t=a,r=n().size){let{width:i,height:s,top:u,left:f}=r,d=i/s;t.isVector3?l.copy(t):l.set(...t);let p=e.getWorldPosition(o).distanceTo(l);if(e&&e.isOrthographicCamera)return{width:i/e.zoom,height:s/e.zoom,top:u,left:f,factor:1,distance:p,aspect:d};{let t=2*Math.tan(e.fov*Math.PI/180/2)*p,r=i/s*t;return{width:r,height:t,top:u,left:f,factor:i/r,distance:p,aspect:d}}}let f=e=>r(t=>({performance:{...t.performance,current:e}})),d=new s.I9Y;return{set:r,get:n,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(t=1)=>e(n(),t),advance:(e,r)=>t(e,r,n()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new s.zD7,pointer:d,mouse:d,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{let e=n();i&&clearTimeout(i),e.performance.current!==e.performance.min&&f(e.performance.min),i=setTimeout(()=>f(n().performance.max),e.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:c},setEvents:e=>r(t=>({...t,events:{...t.events,...e}})),setSize:(e,t,i,o,l)=>{let s=n().camera,u={width:e,height:t,top:o||0,left:l||0,updateStyle:i};r(e=>({size:u,viewport:{...e.viewport,...c(s,a,u)}}))},setDpr:e=>r(t=>{let r=D(e);return{viewport:{...t.viewport,dpr:r,initialDpr:t.viewport.initialDpr||r}}}),setFrameloop:(e="always")=>{let t=n().clock;t.stop(),t.elapsedTime=0,"never"!==e&&(t.start(),t.elapsedTime=0),r(()=>({frameloop:e}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:u.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(e,t,r)=>{let i=n().internal;return i.priority=i.priority+ +(t>0),i.subscribers.push({ref:e,priority:t,store:r}),i.subscribers=i.subscribers.sort((e,t)=>e.priority-t.priority),()=>{let r=n().internal;null!=r&&r.subscribers&&(r.priority=r.priority-(t>0),r.subscribers=r.subscribers.filter(t=>t.ref!==e))}}}}}),n=r.getState(),i=n.size,o=n.viewport.dpr,a=n.camera;return r.subscribe(()=>{let{camera:e,size:t,viewport:n,gl:l,set:s}=r.getState();if(t.width!==i.width||t.height!==i.height||n.dpr!==o){var c;i=t,o=n.dpr,function(e,t){!e.manual&&(e&&e.isOrthographicCamera?(e.left=-(t.width/2),e.right=t.width/2,e.top=t.height/2,e.bottom=-(t.height/2)):e.aspect=t.width/t.height,e.updateProjectionMatrix(),e.updateMatrixWorld())}(e,t),l.setPixelRatio(n.dpr);let r=null!=(c=t.updateStyle)?c:"undefined"!=typeof HTMLCanvasElement&&l.domElement instanceof HTMLCanvasElement;l.setSize(t.width,t.height,r)}e!==a&&(a=e,s(t=>({viewport:{...t.viewport,...t.viewport.getCurrentViewport(e)}})))}),r.subscribe(t=>e(t)),r})(el,es),p=i||ec.createContainer(l,f.ConcurrentRoot,null,!1,null,"",a,null);n||ea.set(e,{fiber:p,store:l});let h=!1;return{configure(n={}){var i,o;let{gl:a,size:u,scene:f,events:d,onCreated:p,shadows:v=!1,linear:m=!1,flat:g=!1,legacy:b=!1,orthographic:y=!1,frameloop:w="always",dpr:_=[1,2],performance:C,raycaster:P,camera:j,onPointerMissed:S}=n,M=l.getState(),x=M.gl;M.gl||M.set({gl:x=((e,t)=>{let r="function"==typeof e?e(t):e;return $(r)?r:new c.WebGLRenderer({powerPreference:"high-performance",canvas:t,antialias:!0,alpha:!0,...e})})(a,e)});let O=M.raycaster;O||M.set({raycaster:O=new s.tBo});let{params:k,...A}=P||{};if(R.equ(A,O,ef)||eu(O,{...A}),R.equ(k,O.params,ef)||eu(O,{params:{...O.params,...k}}),!M.camera||M.camera===r&&!R.equ(r,j,ef)){r=j;let e=j instanceof s.i7d,t=e?j:y?new s.qUd(0,0,0,0,.1,1e3):new s.ubm(75,0,.1,1e3);!e&&(t.position.z=5,j&&(eu(t,j),("aspect"in j||"left"in j||"right"in j||"bottom"in j||"top"in j)&&(t.manual=!0,t.updateProjectionMatrix())),M.camera||null!=j&&j.rotation||t.lookAt(0,0,0)),M.set({camera:t}),O.camera=t}if(!M.scene){let e;null!=f&&f.isScene?e=f:(e=new s.Z58,f&&eu(e,f)),M.set({scene:T(e)})}if(!M.xr){let e=(e,t)=>{let r=l.getState();"never"!==r.frameloop&&es(e,!0,r,t)},t=()=>{let t=l.getState();t.gl.xr.enabled=t.gl.xr.isPresenting,t.gl.xr.setAnimationLoop(t.gl.xr.isPresenting?e:null),t.gl.xr.isPresenting||el(t)},r={connect(){let e=l.getState().gl;e.xr.addEventListener("sessionstart",t),e.xr.addEventListener("sessionend",t)},disconnect(){let e=l.getState().gl;e.xr.removeEventListener("sessionstart",t),e.xr.removeEventListener("sessionend",t)}};"function"==typeof(null==(i=x.xr)?void 0:i.addEventListener)&&r.connect(),M.set({xr:r})}if(x.shadowMap){let e=x.shadowMap.enabled,t=x.shadowMap.type;if(x.shadowMap.enabled=!!v,R.boo(v))x.shadowMap.type=s.Wk7;else if(R.str(v)){let e={basic:s.bTm,percentage:s.QP0,soft:s.Wk7,variance:s.RyA};x.shadowMap.type=null!=(o=e[v])?o:s.Wk7}else R.obj(v)&&Object.assign(x.shadowMap,v);(e!==x.shadowMap.enabled||t!==x.shadowMap.type)&&(x.shadowMap.needsUpdate=!0)}let L=E();L&&("enabled"in L?L.enabled=!b:"legacyMode"in L&&(L.legacyMode=b)),h||eu(x,{outputEncoding:m?3e3:3001,toneMapping:g?s.y_p:s.FV}),M.legacy!==b&&M.set(()=>({legacy:b})),M.linear!==m&&M.set(()=>({linear:m})),M.flat!==g&&M.set(()=>({flat:g})),!a||R.fun(a)||$(a)||R.equ(a,x,ef)||eu(x,a),d&&!M.events.handlers&&M.set({events:d(l)});let z=function(e,t){let r="undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement;if(t){let{width:e,height:n,top:i,left:o,updateStyle:a=r}=t;return{width:e,height:n,top:i,left:o,updateStyle:a}}if("undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&e.parentElement){let{width:t,height:n,top:i,left:o}=e.parentElement.getBoundingClientRect();return{width:t,height:n,top:i,left:o,updateStyle:r}}return"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas?{width:e.width,height:e.height,top:0,left:0,updateStyle:r}:{width:0,height:0,top:0,left:0}}(e,u);return R.equ(z,M.size,ef)||M.setSize(z.width,z.height,z.updateStyle,z.top,z.left),_&&M.viewport.dpr!==D(_)&&M.setDpr(_),M.frameloop!==w&&M.setFrameloop(w),M.onPointerMissed||M.set({onPointerMissed:S}),C&&!R.equ(C,M.performance,ef)&&M.set(e=>({performance:{...e.performance,...C}})),t=p,h=!0,this},render(r){return h||this.configure(),ec.updateContainer((0,v.jsx)(ep,{store:l,children:r,onCreated:t,rootElement:e}),p,null,()=>void 0),l},unmount(){ev(e)}}}function ep({store:e,children:t,onCreated:r,rootElement:n}){return P(()=>{let t=e.getState();t.set(e=>({internal:{...e.internal,active:!0}})),r&&r(t),e.getState().events.connected||null==t.events.connect||t.events.connect(n)},[]),(0,v.jsx)(V.Provider,{value:e,children:t})}function ev(e,t){let r=ea.get(e),n=null==r?void 0:r.fiber;if(n){let i=null==r?void 0:r.store.getState();i&&(i.internal.active=!1),ec.updateContainer(null,n,null,()=>{i&&setTimeout(()=>{try{var r,n,o,a;for(let e in null==i.events.disconnect||i.events.disconnect(),null==(r=i.gl)||null==(n=r.renderLists)||null==n.dispose||n.dispose(),null==(o=i.gl)||null==o.forceContextLoss||o.forceContextLoss(),null!=(a=i.gl)&&a.xr&&i.xr.disconnect(),i.dispose&&"Scene"!==i.type&&i.dispose(),i)null==e.dispose||e.dispose(),delete i[e];ea.delete(e),t&&t(e)}catch(e){}},500)})}}ec.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:u.version}),u.unstable_act;let eh={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function em(e){let{handlePointer:t}=function(e){function t(e){return e.filter(e=>["Move","Over","Enter","Out","Leave"].some(t=>{var r;return null==(r=e.__r3f)?void 0:r.handlers["onPointer"+t]}))}function r(t){let{internal:r}=e.getState();for(let e of r.hovered.values())if(!t.length||!t.find(t=>t.object===e.object&&t.index===e.index&&t.instanceId===e.instanceId)){let n=e.eventObject.__r3f,i=null==n?void 0:n.handlers;if(r.hovered.delete(N(e)),null!=n&&n.eventCount){let r={...e,intersections:t};null==i.onPointerOut||i.onPointerOut(r),null==i.onPointerLeave||i.onPointerLeave(r)}}}function n(e,t){for(let r=0;r<t.length;r++){let n=t[r].__r3f;null==n||null==n.handlers.onPointerMissed||n.handlers.onPointerMissed(e)}}return{handlePointer:function(i){switch(i){case"onPointerLeave":case"onPointerCancel":return()=>r([]);case"onLostPointerCapture":return t=>{let{internal:n}=e.getState();"pointerId"in t&&n.capturedMap.has(t.pointerId)&&requestAnimationFrame(()=>{n.capturedMap.has(t.pointerId)&&(n.capturedMap.delete(t.pointerId),r([]))})}}return function(o){let{onPointerMissed:a,internal:l}=e.getState();l.lastEvent.current=o;let c="onPointerMove"===i,u="onClick"===i||"onContextMenu"===i||"onDoubleClick"===i,f=function(t,r){let n=e.getState(),i=new Set,o=[],a=r?r(n.internal.interaction):n.internal.interaction;for(let e=0;e<a.length;e++){let t=k(a[e]);t&&(t.raycaster.camera=void 0)}n.previousRoot||null==n.events.compute||n.events.compute(t,n);let l=a.flatMap(function(e){let r=k(e);if(!r||!r.events.enabled||null===r.raycaster.camera)return[];if(void 0===r.raycaster.camera){var n;null==r.events.compute||r.events.compute(t,r,null==(n=r.previousRoot)?void 0:n.getState()),void 0===r.raycaster.camera&&(r.raycaster.camera=null)}return r.raycaster.camera?r.raycaster.intersectObject(e,!0):[]}).sort((e,t)=>{let r=k(e.object),n=k(t.object);return r&&n&&n.events.priority-r.events.priority||e.distance-t.distance}).filter(e=>{let t=N(e);return!i.has(t)&&(i.add(t),!0)});for(let e of(n.events.filter&&(l=n.events.filter(l,n)),l)){let t=e.object;for(;t;){var s;null!=(s=t.__r3f)&&s.eventCount&&o.push({...e,eventObject:t}),t=t.parent}}if("pointerId"in t&&n.internal.capturedMap.has(t.pointerId))for(let e of n.internal.capturedMap.get(t.pointerId).values())i.has(N(e.intersection))||o.push(e.intersection);return o}(o,c?t:void 0),d=u?function(t){let{internal:r}=e.getState(),n=t.offsetX-r.initialClick[0],i=t.offsetY-r.initialClick[1];return Math.round(Math.sqrt(n*n+i*i))}(o):0;"onPointerDown"===i&&(l.initialClick=[o.offsetX,o.offsetY],l.initialHits=f.map(e=>e.eventObject)),u&&!f.length&&d<=2&&(n(o,l.interaction),a&&a(o)),c&&r(f),!function(t,n,i,o){let a=e.getState();if(t.length){let e={stopped:!1};for(let l of t){let{raycaster:c,pointer:u,camera:f,internal:d}=k(l.object)||a,p=new s.Pq0(u.x,u.y,0).unproject(f),v=e=>{var t,r;return null!=(t=null==(r=d.capturedMap.get(e))?void 0:r.has(l.eventObject))&&t},h=e=>{let t={intersection:l,target:n.target};d.capturedMap.has(e)?d.capturedMap.get(e).set(l.eventObject,t):d.capturedMap.set(e,new Map([[l.eventObject,t]])),n.target.setPointerCapture(e)},m=e=>{let t=d.capturedMap.get(e);t&&Y(d.capturedMap,l.eventObject,t,e)},g={};for(let e in n){let t=n[e];"function"!=typeof t&&(g[e]=t)}let b={...l,...g,pointer:u,intersections:t,stopped:e.stopped,delta:i,unprojectedPoint:p,ray:c.ray,camera:f,stopPropagation(){let i="pointerId"in n&&d.capturedMap.get(n.pointerId);(!i||i.has(l.eventObject))&&(b.stopped=e.stopped=!0,d.hovered.size&&Array.from(d.hovered.values()).find(e=>e.eventObject===l.eventObject)&&r([...t.slice(0,t.indexOf(l)),l]))},target:{hasPointerCapture:v,setPointerCapture:h,releasePointerCapture:m},currentTarget:{hasPointerCapture:v,setPointerCapture:h,releasePointerCapture:m},nativeEvent:n};if(o(b),!0===e.stopped)break}}}(f,o,d,function(e){let t=e.eventObject,r=t.__r3f,a=null==r?void 0:r.handlers;if(null!=r&&r.eventCount)if(c){if(a.onPointerOver||a.onPointerEnter||a.onPointerOut||a.onPointerLeave){let t=N(e),r=l.hovered.get(t);r?r.stopped&&e.stopPropagation():(l.hovered.set(t,e),null==a.onPointerOver||a.onPointerOver(e),null==a.onPointerEnter||a.onPointerEnter(e))}null==a.onPointerMove||a.onPointerMove(e)}else{let r=a[i];r?(!u||l.initialHits.includes(t))&&(n(o,l.interaction.filter(e=>!l.initialHits.includes(e))),r(e)):u&&l.initialHits.includes(t)&&n(o,l.interaction.filter(e=>!l.initialHits.includes(e)))}})}}}}(e);return{priority:1,enabled:!0,compute(e,t,r){t.pointer.set(e.offsetX/t.size.width*2-1,-(2*(e.offsetY/t.size.height))+1),t.raycaster.setFromCamera(t.pointer,t.camera)},connected:void 0,handlers:Object.keys(eh).reduce((e,r)=>({...e,[r]:t(r)}),{}),update:()=>{var t;let{events:r,internal:n}=e.getState();null!=(t=n.lastEvent)&&t.current&&r.handlers&&r.handlers.onPointerMove(n.lastEvent.current)},connect:t=>{var r;let{set:n,events:i}=e.getState();null==i.disconnect||i.disconnect(),n(e=>({events:{...e.events,connected:t}})),Object.entries(null!=(r=i.handlers)?r:[]).forEach(([e,r])=>{let[n,i]=eh[e];t.addEventListener(n,r,{passive:i})})},disconnect:()=>{let{set:t,events:r}=e.getState();if(r.connected){var n;Object.entries(null!=(n=r.handlers)?n:[]).forEach(([e,t])=>{if(r&&r.connected instanceof HTMLElement){let[n]=eh[e];r.connected.removeEventListener(n,t)}}),t(e=>({events:{...e.events,connected:void 0}}))}}}}},9082:(e,t,r)=>{r.d(t,{N:()=>l});var n=r(4501),i=r(9070),o=r(4232),a=r(7372);let l=o.forwardRef(({makeDefault:e,camera:t,regress:r,domElement:l,enableDamping:s=!0,keyEvents:c=!1,onChange:u,onStart:f,onEnd:d,...p},v)=>{let h=(0,i.D)(e=>e.invalidate),m=(0,i.D)(e=>e.camera),g=(0,i.D)(e=>e.gl),b=(0,i.D)(e=>e.events),y=(0,i.D)(e=>e.setEvents),w=(0,i.D)(e=>e.set),_=(0,i.D)(e=>e.get),E=(0,i.D)(e=>e.performance),C=t||m,P=l||b.connected||g.domElement,j=o.useMemo(()=>new a.N(C),[C]);return(0,i.F)(()=>{j.enabled&&j.update()},-1),o.useEffect(()=>(c&&j.connect(!0===c?P:c),j.connect(P),()=>void j.dispose()),[c,P,r,j,h]),o.useEffect(()=>{let e=e=>{h(),r&&E.regress(),u&&u(e)},t=e=>{f&&f(e)},n=e=>{d&&d(e)};return j.addEventListener("change",e),j.addEventListener("start",t),j.addEventListener("end",n),()=>{j.removeEventListener("start",t),j.removeEventListener("end",n),j.removeEventListener("change",e)}},[u,f,d,j,h,y]),o.useEffect(()=>{if(e){let e=_().controls;return w({controls:j}),()=>w({controls:e})}},[e,j]),o.createElement("primitive",(0,n.A)({ref:v,object:j,enableDamping:s},p))})}}]);